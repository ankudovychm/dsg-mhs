<!DOCTYPE html>
<html lang="eng">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="../../../styles/main-dark.css?v1"></link>
        <link rel="stylesheet" href="../../../styles/d3-dark.css?v1"></link>
        <link rel="stylesheet" href="slider_styles.css?v1"></link>
        <link rel="stylesheet" href ="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link rel = "stylesheet" href ="tabs-style.css?v2">
        <script src="CreateSliders.js?v1"></script>
        <script type="text/javascript" src="coRef.js?v2"></script> <!-- Holds the code for the network viz-->
        
        <script src="https://d3js.org/d3.v7.min.js"></script>   
        <!-- Dark Mode Colors
            Xiketic: 110b11
            Raisin Black: 242124
            Black Coffee: 353135 
            Steel Teal: 688F88
            Granny Smith Apple: 91f3b6
            Opal: abc3c0;
            Deep Champagne: FAD6A5
            Antique White: fdeed8
            Floral White: FFFAF0
        -->
        <style></style>
    </head>

    <body>
        <header id="menu">
            <script src="../../../styles/menu.js"></script>
        </header>
        
        <div class="main-body">

            <div class = "tab-menu">
                <h1>Co-reference Network Map</h1>
                <ul class = "menu__tabs">

                    <li><a class="active" href="#item-1"><i class = "fa fa-about"></i> About</a></li>
                
                    <li><a  href="#item-2"><i class = "fa fa-early"></i> Early years</a></li>

                    <li><a  href="#item-3"><i class = "fa fa-earlypol"></i> Early Politics</a></li>

                    <li><a  href="#item-4"><i class = "fa fa-secstate"></i> Sec. of State</a></li>

                    <li><a  href="#item-5"><i class = "fa fa-pres"></i> President</a></li>

                    <li><a  href="#item-6"><i class = "fa fa-late"></i> Later Years</a></li>

                </ul>
                <section class = "menu--wrapper">

                    <article id = "item-1" class = "menu__item item-active">
                        <br>
                        <h3 style="text-align: center;">About</h3>
                        <p style=" padding-left: 20px;">Talk about the idea of co-ref</p>
                    </article>


                    <article id = "item-2" class = "menu__item">
                        <br>
                        <h3 style="text-align: center;">Early Years (1779 - 1793)</h3><br>
                        <p style=" padding-left: 20px;">
                            Here, discuss JQA in this time period<br><br>
                            
                                <div id="G-2" class="Chart-Holder">
                            
                                </div>
                                <br><br>
                        </p>
    
                    </article>

                    <article id = "item-3" class = "menu__item">
                        <br>
                        <h3 style="text-align: center;">Early Political Career (1793 - 1817)</h3>
                        <p style=" padding-left: 20px;" > 
                            Here, discuss how he was during this time period<br><br>

                            <div id="G-3" class="Chart-Holder">
                            </div>
                            <br><br>

                        </p>
                    </article>


                    <article id = "item-4" class = "menu__item">
                        <br>
                        <h3 style="text-align: center;">Secretary of State (1817 to 1825)</h3>
                        <p style=" padding-left: 20px;"> 
                            Here, discuss how he was during this time period<br><br>

                            <div id="G-4" class="Chart-Holder">
                            </div>
                            <br><br>
                        </p>
                    </article>

                    <article id = "item-5" class = "menu__item">
                        <br>
                        <h3 style="text-align: center;">President (1825 - 1829)</h3>
                        <p style=" padding-left: 20px;">
                            Here, discuss how he was during this time period<br><br>

                            <div id="G-5" class="Chart-Holder">
                            </div>
                            <br><br>
                        </p>
                    </article>

                    <article id = "item-6" class = "menu__item">
                        <br>
                        <h3 style="text-align: center;">Late Congressional Career (1830 - 1848)</h3>
                        <p style=" padding-left: 20px;" >
                            Here, discuss how he was during this time period<br><br>
                            
                            <div id="G-6" class="Chart-Holder">
                            </div>
                            <br><br>
                        </p>
                    </article>


                </section>
                
                <!--  Filters! -->
                <br>
                
                <!-- Hides the filters by default (because the first tab is the about tab)-->
                <div style="visibility: hidden;" id="FiltersandTitle">
                
                <div class="Filter-Title">
                    <br>
                <h2 style="color: #7a7369;" class="title">Filters</h2>
                </div>
                <div  class="Filter-Container" id="Filter-Container">

                     <!-- Link to your JavaScript file -->
                    <script>
                        // Example of how to create sliders
                        
                        CreateSlider('degree', 1, 'Filter-Container',1);
                        CreateSlider('modularity', 1, 'Filter-Container',1);
                        CreateSlider('betweenness', .01, 'Filter-Container',.05);
                        CreateSlider('eigenvector', .01, 'Filter-Container',.05);

                    </script>
                </div> <!-- ends filters -->
            </div>
                
            </div>
            <script src='http://code.jquery.com/jquery.min.js'></script>
            <script type="text/javascript">
                $(function() {
                    var $menu_tabs = $('.menu__tabs li a');
            
                    // Create a mapping for each tab and the corresponding graph script to load
                    var graphMapping = {
                        "item-2": "early.json",  
                        "item-3": "earlypol.json", 
                        "item-4": "secstate.json", 
                        "item-5": "pres.json", 
                        "item-6": "late.json"
                    };

                    // holds the contianer ID for each of the tabs for where the chart should go 
                    var ContainerMapping = {
                        "item-2": "G-2",  
                        "item-3": "G-3", 
                        "item-4": "G-4", 
                        "item-5": "G-5",  
                        "item-6": "G-6"
                    };
            
                    $menu_tabs.on("click", function(e) {
                        e.preventDefault();

                        // Sets the slider progress bars back to their default lenghts 
                        $('.slider .range-slider .progress').css({
                            'left': '0%', 'right': '0%'});

                        // Store the target article ID (hash) before fade out begins
                        var targetArticleID = this.hash;
            
                        // Remove 'active' class from all tabs
                        $menu_tabs.removeClass('active');
                        $(this).addClass('active'); // Add active class to clicked tab
            
                        var active_tab = this.href.toString().substring(this.href.toString().indexOf("#") + 1);

            
                        // Clear all graphs from all tabs before rendering the new one
                        clearAllGraphs();
            
                       
            
                        // Fade out current visible articles
                        $('.menu__item.item-active').fadeOut(300, function() {
                            // After fadeOut completes, remove 'item-active' from the old article
                            $(this).removeClass('item-active');
            
                            // Ensure the new article is hidden first, then fade in
                            $(targetArticleID).hide().addClass('item-active').fadeIn(300);  // Fade in new article after class is added
                        });

                         // Check if the tab has a corresponding graph script
                         if (graphMapping[active_tab]) {
                            loadGraph(graphMapping[active_tab], ContainerMapping[active_tab]); // Load the corresponding graph into the correct container
                        }

                       // Only shows filters if not on the info tab
                        if (active_tab != "item-1"){
                            $("#FiltersandTitle").css("visibility","visible");
                        }

                        else {
                            $("#FiltersandTitle").css("visibility","hidden");
                            $('.menu__item.item-active').css({
                                'left': '0%', 'right': '0%'});

                               
                        }

                    });
            
                    // Function to clear all graphs from all containers
                function clearAllGraphs() {
                        console.log("Clearing all graphs...");
            
                        $('.network').remove();
                        // Clear any existing graph content inside all graph containers
                        //d3.selectAll(".graph-container").selectAll("*").remove();

                     }
            
                    // General function to load the corresponding graph script into the specific container
                    function loadGraph(graphScript, containerID) {
                    
                        // Create the div element as a string
                        var div_string = '<div class="network"></div>';

                        // Insert the div into the container with the provided containerID
                        $(div_string).appendTo(document.getElementById(containerID));

                        // Manually call the graph function after the div is inserted
                        graph("data/"+graphScript);
                    }
                });
            </script>
            
    </body>
    
    
</html>